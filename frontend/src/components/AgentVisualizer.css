/* Banana-themed visual for the agent. Stars removed entirely. */
.white-dwarf {
  /* banana color tokens (for future use) */
  --bn-core: #ffd84a;
  --bn-core-dark: #ffb347;
  --bn-accent: #ffb300;
  position: relative;
  width: 32rem; /* stage box to keep centered */
  height: 32rem;
  display: flex;
  align-items: center;
  justify-content: center;
}

.white-dwarf .wd-stage {
  position: relative;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  /* stage scales when speaking; audio level controlled by --wd-level */
  --wd-speak-base: 1;
  transform: scale(calc(var(--wd-speak-base) + (var(--wd-level, 0) * 0.22)));
  transition: transform 90ms linear;
  z-index: 1;
}

/* Banana rain background */
.banana-rain { position: absolute; inset: 0; z-index: 0; overflow: hidden; pointer-events: none; }
/* Outer wrapper handles constant rotation/scale and fall via top animation */
.banana-drop { position: absolute; top: -18%; will-change: top, transform; transform-origin: 50% 50%; animation: banana-fall-pos var(--dur, 12s) linear infinite; animation-delay: var(--delay, 0s); }
.banana-drop-anim { animation: banana-sway var(--dur, 12s) ease-in-out infinite; animation-delay: var(--delay, 0s); }
.banana-drop-img { width: 100%; height: auto; display: block; filter: drop-shadow(0 0 6px rgba(255,225,90,0.35)) drop-shadow(0 2px 4px rgba(0,0,0,0.25)); opacity: 0.95; }

@keyframes banana-fall-pos {
  0% { top: -18%; opacity: 0.0; }
  5% { opacity: 0.85; }
  100% { top: 118%; opacity: 0.95; }
}

@keyframes banana-sway {
  0% { transform: translateX(0); }
  50% { transform: translateX(var(--sway, 0px)); }
  100% { transform: translateX(0); }
}

/* Big banana styles - low-poly geometric banana used as the agent visual */
.big-banana {
  position: absolute;
  z-index: 3;
  width: 28rem;
  height: auto;
  display: flex;
  align-items: center;
  justify-content: center;
  transform-origin: 50% 50%;
  pointer-events: none;
  transition: transform 140ms linear, filter 200ms ease;
  /* subtle yellow outline */
  filter: drop-shadow(0 0 6px rgba(255,230,120,0.25)) drop-shadow(0 0 16px rgba(255,210,60,0.18));
}
.big-banana .banana-img { width: 28rem; height: auto; display: block; image-rendering: -webkit-optimize-contrast; }

/* Gentle base breathing */
@keyframes banana-pulse {
  0% { transform: scale(1) translateY(0px); opacity: 0.96; }
  50% { transform: scale(1.035) translateY(-4px); opacity: 1; }
  100% { transform: scale(1) translateY(0px); opacity: 0.96; }
}

.white-dwarf .big-banana {
  animation: banana-pulse 6s ease-in-out infinite;
  filter: drop-shadow(0 3px 8px rgba(0,0,0,0.25)) drop-shadow(0 0 12px rgba(255,215,80,0.35));
}
.white-dwarf.speaking .big-banana {
  animation: banana-pulse 1.05s ease-in-out infinite;
  transform: scale(calc(1 + (var(--wd-level, 0) * 0.18)));
  filter: drop-shadow(0 6px 20px rgba(0,0,0,0.35)) drop-shadow(0 0 24px rgba(255,225,90,0.55)) brightness(1.05);
}

/* slightly lift the banana so it sits higher in the stage like the reference */
.white-dwarf .big-banana { transform: translateY(-3.5rem); }
.white-dwarf.speaking .big-banana { transform: translateY(-3.5rem) scale(calc(1 + (var(--wd-level, 0) * 0.18))); }

/* Accessibility: reduce motion */
@media (prefers-reduced-motion: reduce) {
  .white-dwarf .big-banana { animation: none !important; transform: none !important; }
  .banana-drop, .banana-drop-anim { animation: none !important; }
}


